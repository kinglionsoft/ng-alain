<div class="content__title">
  <h1>
    组织机构
    <small>管理组织机构</small>
  </h1>
</div>
<nz-row nzGutter="10">
  <nz-col nzLg="8" nzMd="12" nzSm="24">
    <nz-card nzTitle="组织机构树" [nzExtra]="extraTemplate">
      <ng-template #extraTemplate>
        <a (click)="addOrganization(null)">添加根组织</a>
      </ng-template>
      <nz-input-group [nzSuffix]="suffixIcon">
        <input type="text" nz-input placeholder="搜索···" [(ngModel)]="searchValue">
      </nz-input-group>
      <ng-template #suffixIcon>
        <i class="anticon anticon-search"></i>
      </ng-template>
      <nz-tree [(ngModel)]="nodes" [nzSearchValue]="searchValue" (nzExpandChange)="mouseAction('expand',$event)" [nzShowLine]="true"
        (nzClick)="onNodeClick($event)" [nzDraggable]="false" (nzContextMenu)="mouseAction('expand',$event)"></nz-tree>
    </nz-card>

  </nz-col>

  <nz-col nzLg="16" nzMd="12" nzSm="24">
    <nz-card [nzTitle]="selectedTitle" [nzExtra]="ouTemplate">
      <ng-template #ouTemplate>
        <nz-button-group *ngIf="selectedNode">
          <button nz-button nzType="primary" (click)="addUser()">
            <i class="icon icon-user-follow"></i> 添加成员</button>
          <button nz-button nzType="info" (click)="addOrganization(selectedNode)">
            <i class="icon icon-share"></i> 添加子组织</button>
          <button nz-button nzType="danger" (click)="deleteOrg()">
            <i class="anticon anticon-delete"></i> 删除组织</button>
        </nz-button-group>
      </ng-template>

      <nz-table #userTable [nzData]="users">
        <thead>
          <tr>
            <th>操作</th>
            <th>姓名
              <nz-dropdown nzTrigger="click" [nzClickHide]="false">
                <i class="anticon anticon-filter" nz-dropdown></i>
                <div class="custom-filter-dropdown">
                  <input type="text" nz-input placeholder="搜索···" [(ngModel)]="userNameSearchValue">
                  <button nz-button [nzType]="'primary'" (click)="search()">查询</button>
                </div>
              </nz-dropdown>
            </th>
            <th>用户名</th>
            <th>Email</th>
            <th>注册时间</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of userTable.data; let i = index">
            <td>
             <button nz-button (click)="removeUser(data, i)"> <i class="anticon anticon-close-circle-o"></i> 移除</button>
            </td>
            <td>{{data.name}}</td>
            <td>{{data.userName}}</td>
            <td>{{data.emailAddress}}</td>
            <td>{{data.addedTime | _date: 'YYYY年MM月DD日'}}</td>
          </tr>
        </tbody>
      </nz-table>
    </nz-card>
  </nz-col>
</nz-row>
